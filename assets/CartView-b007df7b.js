import{c as u}from"./cartStore-ece9d5ae.js";import{l as f}from"./loadingStore-e4b44e9d.js";import{_ as y,m as L,a as p,r as _,o,c as n,d as h,b as t,k as m,F as g,i as b,t as l,w as x,l as $,p as N,v as V,e as v}from"./index-b687e0c4.js";import"./sweetalert2.all-701279fd.js";const S={data(){return{productListData:[],productId:"",cart:[],loadingItem:"",orderData:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{...L(u,["getCartList","deleteCartItem","updateCartItem","deleteAllCartItem"])},computed:{...p(u,["cartList"]),...p(f,["isLoading"])},mounted(){this.getCartList(),console.log(this.isLoading)}},T={class:"container"},w={key:0,class:"text-end"},D={class:"table align-middle"},U=t("thead",null,[t("tr",null,[t("th",null,"品項"),t("th",{class:"text-center"},"單價"),t("th",{class:"text-center"},"數量"),t("th",{class:"text-center"},"小計"),t("th")])],-1),A={key:0},B={class:"d-flex align-items-center gap-2"},q={class:"mb-0"},z={class:"mb-0"},F={class:"text-center"},E={class:"input-group input-group-sm"},M={class:"input-group mb-3"},j=["onUpdate:modelValue","onChange","disabled"],G=["value"],H={class:"text-center"},I={class:"text-end"},J=["onClick","disabled"],K={key:0,class:"fas fa-spinner fa-pulse"},O={key:1},P=t("tr",null,[t("td",{colspan:"5",class:"text-center"},"目前購物車沒有商品")],-1),Q=[P],R=t("td",{colspan:"4",class:"text-end"},"總計",-1),W={class:"text-end"},X=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),Y={class:"text-end text-success"};function Z(s,d,tt,et,i,st){var r,c;const k=_("VueLoading"),C=_("router-link");return o(),n("div",T,[h(k,{active:s.isLoading,"onUpdate:active":d[0]||(d[0]=e=>s.isLoading=e)},null,8,["active"]),((r=s.cartList.carts)==null?void 0:r.length)>0?(o(),n("div",w,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:d[1]||(d[1]=e=>s.deleteAllCartItem())}," 清空購物車 ")])):m("",!0),t("table",D,[U,((c=s.cartList.carts)==null?void 0:c.length)>0?(o(),n("tbody",A,[(o(!0),n(g,null,b(s.cartList.carts,e=>(o(),n("tr",{key:e.id},[t("td",B,[t("div",{alt:"",style:$([{width:"100px",height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4),t("div",null,[t("p",q,l(e.product.title),1),t("p",z,"NT$ "+l(e.product.price),1)])]),t("td",F,"NT$ "+l(e.product.price),1),t("td",null,[t("div",E,[t("div",M,[N(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":a=>e.qty=a,onChange:a=>s.updateCartItem(e),disabled:e.id===i.loadingItem},[(o(),n(g,null,b(25,a=>t("option",{value:a,key:a+"123"},l(a),9,G)),64))],40,j),[[V,e.qty]])])])]),t("td",H,"NT$ "+l(e.total),1),t("td",I,[t("button",{type:"button",class:"btn",onClick:a=>s.deleteCartItem(e),disabled:e.id===i.loadingItem},[e.id===i.loadingItem?(o(),n("i",K)):m("",!0),v(" x ")],8,J)])]))),128))])):(o(),n("tbody",O,Q)),t("tfoot",null,[t("tr",null,[R,t("td",W,"NT$ "+l(s.cartList.total),1)]),t("tr",null,[X,t("td",Y,"NT$ "+l(s.cartList.final_total),1)])])]),h(C,{to:"/order",class:"btn btn-primary"},{default:x(()=>[v("去買單")]),_:1})])}const dt=y(S,[["render",Z]]);export{dt as default};
